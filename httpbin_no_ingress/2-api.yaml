apiVersion: hub.traefik.io/v1alpha1
kind: APIVersion
metadata:
  name: httpbin-v1
  namespace: apps
spec:
  title: "HTTPBin API"
  description: "HTTPBin API OpenAPI spec"
  release: v1.0.0
  openApiSpec:
    url: https://raw.githubusercontent.com/carlosvillanua/apiops/refs/heads/main/api-management/httpbin_versioning_deprecation/oas/httpbin_v1_OAS.json
    override:
      servers:
        - url: https://httpbingo.org/
  cors:
    allowHeadersList:
      - "*"
    allowOriginsList:
      - "*"
    allowMethodsList:
      - "*"
    exposeHeadersList:
      - "*"
    addVaryHeader: true
    allowCredentials: true
    allowOriginListRegex:
      - ".*"
    maxAge: 86400
---
apiVersion: hub.traefik.io/v1alpha1
kind: APIVersion
metadata:
  name: httpbin-v2
  namespace: apps
spec:
  title: "HTTPBin API"
  description: "HTTPBin API OpenAPI spec"
  release: v2.0.0
  openApiSpec:
    url: https://raw.githubusercontent.com/carlosvillanua/apiops/refs/heads/main/api-management/httpbin_versioning_deprecation/oas/httpbin_v2_OAS.json
    override:
      servers:
        - url: https://httpbingo.org/
  cors:
    allowHeadersList:
      - "*"
    allowOriginsList:
      - "*"
    allowMethodsList:
      - "*"
    exposeHeadersList:
      - "*"
    addVaryHeader: true
    allowCredentials: true
    allowOriginListRegex:
      - ".*"
    maxAge: 86400
---
apiVersion: hub.traefik.io/v1alpha1
kind: API
metadata:
  name: httpbin-api
  namespace: apps
spec:
  title: "HTTPBin API"
  description: "HTTPBin API OpenAPI spec"
  versions:
    - name: httpbin-v1
    - name: httpbin-v2
